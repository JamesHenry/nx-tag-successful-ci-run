name: 'Nx tag successful main build'
description: 'Tags the repo, intended to be used only when on the main branch of your repo at the end of an Nx powered CI run'

inputs:
  command-string-to-echo-as-tag-name:
    description: "A string which will be provided to bash's echo command in order to form the final tag name"
    default: 'nx_successful_ci_run__$(echo ${{ github.run_id }})__$(date +"%Y-%m-%d-%H%M")-UTC'

runs:
  using: 'composite'
  steps:
    - shell: bash
      run: |
        git tag $(echo ${{ inputs.command-string-to-echo-as-tag-name }})
        git push origin --tags
